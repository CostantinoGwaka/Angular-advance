<div class="">
  <div class="rounded border bg-white transition-all hover:border-2">
    <div
      (click)="toggleContent()"
      mat-ripple
      class="flex items-center justify-between px-3 py-2 cursor-pointer"
      >
      <div class="">
        <div class="font-bold !text-primary">{{ title }}</div>
        <div class="text-xs text-gray-600">{{ subTitle }}</div>
      </div>
      <div class="flex items-center space-x-2">
        <button mat-icon-button>
          @if (isExpanded) {
            <mat-icon>expand_more</mat-icon>
          }
          @if (!isExpanded) {
            <mat-icon>chevron_right</mat-icon>
          }
        </button>
      </div>
    </div>
    @if (isLoading) {
      <div>
        <app-loader [message]="loadingMessage"></app-loader>
      </div>
    }

    @if (isExpanded) {
      <div
        class="content p-4 border-t"
        [@expandCollapse]="isExpanded ? 'expanded' : 'collapsed'"
        >
        @if (errorMessage) {
          <div
            class="rounded !border border-red-500 bg-red-50 p-2 text-center text-red-500"
            >
            {{ errorMessage }}
          </div>
        }
        <ng-content></ng-content>
      </div>
    }
  </div>
</div>
