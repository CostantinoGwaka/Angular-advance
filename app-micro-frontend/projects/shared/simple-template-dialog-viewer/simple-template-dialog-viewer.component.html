<app-modal-header [title]="title" (closeModal)="closeModal()"></app-modal-header>
<hr class="line">
@if (loading) {
  <app-loader [message]="loadingMessage"></app-loader>
}

<div class="row col-sm-12 m-auto">
  @if (htmlContent) {
    <div @fadeIn
         class="text-black" id="sectionToPrint"
         #container
         [innerHTML]="htmlContent | doNotSanitize">
      <!-- The inner HTML of this div will be set by the component -->
    </div>
  }

  @if (htmlContent && data.canSign) {
    <ng-container [ngTemplateOutlet]="SimpleTemplateAttachmentKeyPhrase"></ng-container>
  }
</div>


<ng-template #SimpleTemplateAttachmentKeyPhrase>
  <div class="flex col-sm-6 m-auto mt-5 items-center justify-between  text-[12px]">
    <div class="flex-1 relative">
      <input
        placeholder="Enter key phrase to sign document"
        [type]="hide ? 'text' : 'password'"
        [(ngModel)]="signKeyPhrase"
        class="w-full text-[13px] rounded-l-[5px] outline-0 px-[25px] py-[20px] bg-[#F1F1F1]">

      <mat-icon class="absolute right-0 top-0 mt-[20px] mr-[8px] cursor-pointer" (click)="hide = !hide" matSuffix>
        {{ hide ? 'visibility_off' : 'visibility' }}
      </mat-icon>
    </div>
<!--    <div (click)="signDocument()"-->
<!--         [ngClass]="{'active:bg-[#4FA3C8] bg-[#1394db]':!!htmlContent && signKeyPhrase, 'bg-[#ADADAD]':!htmlContent || !signKeyPhrase, 'bg-[#D45656]':signingDocumentFailed}"-->
<!--         class="flex items-center justify-start gap-[10px] w-[170px] text-[13px] h-[60px] cursor-pointer  text-white   px-[25px] py-[20px] rounded-r-[5px]">-->
<!--        <span>-->
<!--          @if (signingDocument) {-->
<!--            <svg width="15" height="13" class="animate-spin -ml-1 mr-3  text-white"-->
<!--                 xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">-->
<!--              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>-->
<!--              <path class="opacity-75" fill="currentColor"-->
<!--                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>-->
<!--            </svg>-->
<!--          }-->

<!--          @if (signingDocumentFailed) {-->
<!--            <svg width="12" height="12" viewBox="0 0 12 12" fill="none"-->
<!--                 xmlns="http://www.w3.org/2000/svg">-->
<!--            <path-->
<!--              d="M6 0C2.68594 0 0 2.68594 0 6C0 9.31406 2.68594 12 6 12C9.31406 12 12 9.31406 12 6C12 2.68594 9.31406 0 6 0ZM1.5 6C1.5 3.51328 3.51562 1.5 6 1.5C6.98672 1.5 7.89844 1.82109 8.63906 2.36016L2.36016 8.63906C1.82109 7.89844 1.5 6.98672 1.5 6ZM6 10.5C5.01328 10.5 4.10156 10.1789 3.36094 9.63984L9.63984 3.36094C10.1789 4.10391 10.5 5.01328 10.5 6C10.5 8.48672 8.48438 10.5 6 10.5Z"-->
<!--              fill="white"/>-->
<!--            </svg>-->
<!--          }-->

<!--          @if (!signingDocument && !signingDocumentFailed) {-->
<!--            <svg width="15" height="13" viewBox="0 0 15 13" fill="none"-->
<!--                 xmlns="http://www.w3.org/2000/svg">-->
<!--            <path-->
<!--              d="M0.04055 12.1959C0.062925 12.0283 0.1168 11.8911 0.1603 11.8911C0.2038 11.8911 0.239425 11.803 0.239425 11.6946C0.239425 11.5859 0.27955 11.4981 0.328675 11.4981C0.3778 11.4981 0.417925 11.41 0.417925 11.3017C0.417925 11.193 0.45805 11.1052 0.507175 11.1052C0.5563 11.1052 0.596425 11.0406 0.596425 10.9614C0.596425 10.8816 0.696425 10.6203 0.818626 10.3794C0.976201 10.0687 1.02559 9.8573 0.988413 9.65282C0.956663 9.4782 0.990913 9.24798 1.07429 9.06992C1.15029 8.90796 1.30011 8.49294 1.40713 8.14769C1.51413 7.8023 1.6293 7.47549 1.66303 7.42155C1.69678 7.36789 1.77865 7.12432 1.84516 6.88118C1.91166 6.63817 1.99916 6.39722 2.0397 6.34589C2.0802 6.29498 2.11345 6.15091 2.11345 6.02665C2.11345 5.9028 2.15358 5.8007 2.2027 5.8007C2.25183 5.8007 2.29195 5.67135 2.29195 5.51173C2.29195 5.35294 2.33208 5.19552 2.3812 5.16222C2.43033 5.12919 2.47245 5.02599 2.47483 4.9353C2.47733 4.84449 2.68166 4.59239 2.92905 4.37635C3.17643 4.16018 3.47377 3.88387 3.5898 3.76236C3.7058 3.64127 3.82305 3.54137 3.85028 3.54137C3.87753 3.54137 4.02074 3.41339 4.1686 3.25845C4.31647 3.10296 4.60723 2.8488 4.81474 2.69372C5.02225 2.5385 5.20542 2.37847 5.22178 2.33801C5.23815 2.29811 5.30715 2.26508 5.37523 2.26508C5.44323 2.26508 5.64192 2.17701 5.81668 2.06858C6.15324 1.86052 6.57517 1.80589 6.57517 1.97088C6.57517 2.02455 6.62779 2.06858 6.69217 2.06858C6.75654 2.06858 6.88703 2.14839 6.98218 2.2454C7.29308 2.56327 7.45646 2.57566 7.67053 2.29769C8.05048 1.80424 9.04016 0.741656 9.23354 0.619738C9.46652 0.472776 9.87681 0.457089 9.87681 0.594969C9.87681 0.648635 9.93056 0.692669 9.99631 0.692669C10.1557 0.692669 10.3229 1.11539 10.3229 1.51857C10.3229 1.84456 10.0107 2.45663 9.68601 2.76706C9.59463 2.85375 9.51983 2.95833 9.51983 2.99783C9.51983 3.03773 9.39933 3.1935 9.25213 3.345C8.95927 3.64608 8.92404 3.78933 9.09942 3.96588C9.32656 4.19458 10.2121 4.72023 10.3703 4.72023C10.4424 4.72023 10.5014 4.76013 10.5014 4.80692C10.5014 4.85508 10.7633 4.97232 11.0833 5.06768C11.6549 5.2379 11.6688 5.23749 11.8641 5.04291C12.0544 4.85315 12.1191 4.84875 13.3569 4.94108C14.0686 4.99337 14.6617 5.04842 14.6749 5.0608C14.6882 5.07456 14.7648 5.43316 14.8452 5.85974C15.1219 7.32784 15.0199 9.6103 14.6009 11.3232L14.5101 11.6945H13.1304H11.7507V11.3997C11.7507 11.2376 11.7106 11.105 11.6615 11.105C11.6124 11.105 11.5722 11.0114 11.5722 10.898C11.5722 10.738 11.5369 10.708 11.4161 10.7659C11.3302 10.8072 11.1194 10.8581 10.9476 10.8801C10.7758 10.9021 10.5501 10.9668 10.446 11.0224C10.2466 11.1297 9.70828 11.0953 8.67212 10.9068C7.96267 10.7788 8.06216 10.7816 7.26428 10.8683C6.93168 10.9041 6.63818 10.9729 6.61207 11.0191C6.54469 11.1388 4.36743 11.1264 4.29964 11.0053C4.26927 10.9517 4.10869 10.9076 3.9427 10.9076C3.77672 10.9076 3.6161 10.8636 3.58577 10.8099C3.55539 10.7563 3.38782 10.7122 3.21329 10.7122C2.96139 10.7122 2.83183 10.7879 2.5849 11.0806C2.41381 11.2833 2.21304 11.5485 2.13874 11.6701C2.06449 11.7912 1.93031 11.8911 1.8407 11.8911C1.75108 11.8911 1.65294 11.9351 1.62261 11.9888C1.59224 12.0425 1.49569 12.0865 1.40796 12.0865C1.32021 12.0865 1.13188 12.1498 0.989376 12.2288C0.846863 12.3072 0.565963 12.4 0.365138 12.4353L0 12.5L0.04055 12.1959ZM1.08711 11.7928C1.11749 11.7392 1.22021 11.6951 1.31546 11.6951C1.41071 11.6951 1.48868 11.6511 1.48868 11.5974C1.48868 11.5438 1.54893 11.4997 1.62253 11.4997C1.69615 11.4997 1.75638 11.4337 1.75638 11.3532C1.75638 11.1724 1.40441 10.7139 1.26559 10.7139C1.12676 10.7139 0.774801 11.1724 0.774801 11.3532C0.774801 11.4344 0.734676 11.4997 0.68555 11.4997C0.636425 11.4997 0.5963 11.5878 0.5963 11.6962C0.5963 11.8391 0.6558 11.8927 0.814126 11.8927C0.933876 11.8927 1.05676 11.8487 1.08709 11.7951L1.08711 11.7928ZM13.3265 11.1329C14.0385 11.0723 13.9675 11.1604 14.176 10.0737C14.3134 9.35724 14.3701 7.17152 14.2545 7.04424C14.2025 6.98644 14.16 6.81568 14.16 6.66362C14.16 6.51143 14.1101 6.2109 14.049 5.99555L13.938 5.6042H13.2554C12.4785 5.6042 12.4432 5.63998 12.5588 6.29856C12.7005 7.10671 12.6526 8.93177 12.4623 9.96752C12.2711 11.0089 12.2921 11.359 12.5394 11.2516C12.6209 11.2159 12.9751 11.1632 13.3265 11.1329ZM6.44118 10.5295C6.63749 10.4717 7.05239 10.3498 7.36317 10.2583C7.89754 10.1009 7.97024 10.1013 8.70169 10.272C9.12709 10.3684 9.71608 10.4472 10.0106 10.448C10.6388 10.4494 11.7394 10.1794 11.9243 9.97811C12.0583 9.83211 12.2148 8.83352 12.224 8.06568C12.2302 7.55351 12.1381 6.81705 11.9947 6.23182C11.8965 5.8307 11.8852 5.82134 11.4433 5.77112C10.7255 5.68993 10.3229 5.59485 10.3229 5.5076C10.3229 5.46357 10.2325 5.39477 10.1221 5.35679C10.0117 5.31826 9.66625 5.11653 9.35448 4.9082C9.04272 4.69986 8.75159 4.52937 8.70753 4.52937C8.66353 4.52937 8.62741 4.48534 8.62741 4.43167C8.62741 4.17366 8.27843 4.39039 7.80818 4.94163C7.34346 5.486 7.28889 5.59388 7.28889 5.96734C7.28889 6.19687 7.24877 6.41208 7.19964 6.44538C7.15052 6.47841 7.11039 6.59248 7.11039 6.69816C7.11039 6.91159 6.96772 7.21886 6.73116 7.51498C6.64528 7.62232 6.57499 7.7463 6.57499 7.79006C6.57499 7.92766 7.00606 7.87675 7.51418 7.68135C7.99946 7.49366 8.00274 7.49366 8.00274 7.68135C8.00274 7.78868 7.87862 8.00073 7.72696 8.1532L7.45118 8.43047H6.07375C5.133 8.43047 4.66314 8.46212 4.59162 8.54056C4.53399 8.60385 4.37448 8.65614 4.23705 8.65614C4.09963 8.65614 3.98719 8.70018 3.98719 8.75384C3.98719 8.80751 3.90694 8.85154 3.80873 8.85154C3.7106 8.85154 3.63025 8.8887 3.63025 8.93273C3.63025 8.97814 3.53288 9.07171 3.41398 9.14189C3.18624 9.27674 3.05983 9.61869 3.14644 9.8672C3.20406 10.0325 3.80335 10.3246 4.08462 10.3246C4.18524 10.3246 4.32502 10.2613 4.39513 10.1844C4.539 10.026 4.5708 9.24413 4.43338 9.24413C4.38425 9.24413 4.34413 9.15606 4.34413 9.04763C4.34413 8.79278 4.395 8.79994 4.66052 9.09304C4.8198 9.26835 4.87954 9.4409 4.87954 9.72575C4.87954 9.9411 4.83942 10.1446 4.79029 10.1781C4.6262 10.2895 4.69854 10.4828 4.94645 10.5947C5.2229 10.7199 5.90643 10.6924 6.44113 10.5356L6.44118 10.5295ZM2.06758 9.04433C2.32474 8.59587 2.35453 8.21333 2.14983 7.98793C2.02908 7.85446 1.99539 7.8517 1.92433 7.97004C1.87833 8.04573 1.8167 8.23039 1.78741 8.37887C1.75804 8.52748 1.70541 8.64912 1.67029 8.64912C1.59004 8.64912 1.39941 9.10171 1.39941 9.29215C1.39941 9.37884 1.48679 9.43499 1.62138 9.43499C1.78311 9.43499 1.90421 9.32944 2.06758 9.04433ZM2.674 9.11038C3.00284 8.73747 3.18413 8.42015 3.18413 8.21746C3.18413 8.1404 3.21425 8.06224 3.251 8.04421C3.28775 8.02632 3.41832 7.7701 3.54102 7.47522C3.66377 7.18019 3.93475 6.75031 4.14334 6.51996C4.35193 6.28961 4.52259 6.07825 4.52259 6.05046C4.52259 5.95688 4.83108 5.58109 5.88342 4.3941C6.46009 3.74365 6.93192 3.17217 6.93192 3.12415C6.93192 2.9132 6.4356 2.55956 6.13978 2.55956C5.93008 2.55956 5.34445 2.9154 5.13677 3.16914C5.05739 3.26684 4.95103 3.34542 4.9004 3.34542C4.84978 3.34542 4.60333 3.56641 4.3527 3.83653C4.10209 4.10665 3.8737 4.32764 3.84518 4.32764C3.73943 4.32764 2.86214 5.39945 2.74705 5.66915C2.68143 5.82286 2.59238 6.02527 2.54903 6.11912C2.50565 6.21269 2.47015 6.35663 2.47015 6.43836C2.47015 6.51955 2.43003 6.58711 2.3809 6.58711C2.33178 6.58711 2.29165 6.71646 2.29165 6.87361C2.29165 7.03117 2.24315 7.17785 2.1839 7.19959C2.1119 7.22574 2.13928 7.31381 2.26615 7.46366C2.55033 7.79955 2.69801 8.24181 2.57219 8.38038C2.51606 8.4423 2.47006 8.59188 2.47006 8.71297C2.47006 8.83407 2.42994 8.96039 2.38081 8.99383C2.28931 9.05575 2.25354 9.43581 2.33919 9.43581C2.36531 9.43581 2.51613 9.2894 2.674 9.11038ZM6.08439 7.6431C6.25487 7.522 6.39484 7.36678 6.39546 7.29922C6.39606 7.23179 6.43671 7.17675 6.48583 7.17675C6.53496 7.17675 6.57508 7.08868 6.57508 6.98025C6.57508 6.87154 6.61521 6.78389 6.66433 6.78389C6.71346 6.78389 6.75358 6.67381 6.75358 6.53826C6.75358 6.23333 6.63708 6.22342 6.46341 6.5135C6.39065 6.63459 6.13069 6.96539 5.88565 7.24762C5.64063 7.52985 5.46128 7.78414 5.4871 7.81249C5.58123 7.91569 5.78118 7.85914 6.08439 7.6431Z"-->
<!--              fill="white"/>-->
<!--            </svg>-->
<!--          }-->

<!--        </span>-->
<!--      <span>{{ signingDocument ? 'Signing...' : 'Sign Document' }}</span>-->
<!--    </div>-->
  </div>
</ng-template>
